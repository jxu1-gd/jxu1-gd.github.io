"use strict";(self.webpackChunktfin_ui_project_template=self.webpackChunktfin_ui_project_template||[]).push([[527],{6481:function(e,n,t){t.r(n);var o=t(5861),r=t(1413),s=t(4925),i=t(5671),a=t(3144),c=t(9340),u=t(5716),h=t(7757),l=t.n(h),p=t(1694),d=t.n(p),f=t(2672),C=t(6827),g=t(2249),v=t(1386),w=t(2156),m=t(6389),x=t(5989),Z=(t(2336),t(3703)),k=t(9868),S=t(184),y=["contextCls"],b=["contextCls"],E=["contextCls"],W=["isAgentOnline","isSuccess","errors"],P=function(e){(0,c.Z)(t,e);var n=(0,u.Z)(t);function t(){var e;(0,i.Z)(this,t);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).state={shouldShowChooseOptionWindow:!1,shouldShowErrorPage:!1,shouldShowHoopWindow:!1,shouldShowMinimizedIconButton:!1},e.renderSvgChat=function(){return(0,S.jsx)(w.Z,{contextCls:"svg-container"})},e.renderIconButtonChat=function(){return(0,S.jsx)(m.Z,{renderSvg:e.renderSvgChat,onClick:e.handleMinimizedIconBtnClick})},e.renderHoopWindow=function(){var n=e.state.chatConfigs,t=e.props,o=t.contextCls,i=(0,s.Z)(t,y);return(0,S.jsx)(v.Z,(0,r.Z)((0,r.Z)({contextCls:d()(e.baseCls,o),hoop:n.hoop,isLeaveMsgEnabled:n.isLeaveAgentMessageEnabled},i),n))},e.renderChooseOptionWindow=function(){var n=e.props,t=n.contextCls,o=(0,s.Z)(n,b),i=e.state.chatConfigs;return(0,S.jsx)(C.Z,(0,r.Z)((0,r.Z)({contextCls:d()(e.baseCls,t),ewt:i.ewt},o),i))},e.renderErrorPage=function(){var n=e.props,t=n.contextCls,o=(0,s.Z)(n,E);return(0,S.jsx)(g.Z,(0,r.Z)({contextCls:d()(e.baseCls,t),icon:"WarningAlert",windowTitle:"Chat with an agent",headText:"There was a problem connecting to chat support",subText:"Please try again later."},o))},e.handleMinimizedIconBtnClick=function(){e.setState({shouldShowMinimizedIconButton:!1}),e.fetchConfig()},e.baseCls="web-chat-module",e}return(0,a.Z)(t,[{key:"render",value:function(){return this.state.isDesignTokenApplied&&this.renderContent()}},{key:"componentDidMount",value:function(){var e=this.props.accessToken;e&&(k.Z.accessToken=e),this.setContainerElementStyle(),this.fetchConfig(),this.applyDesignToken()}},{key:"componentWillUnmount",value:function(){this.restoreContainerElementStyle()}},{key:"renderContent",value:function(){var e=this.state,n=e.shouldShowChooseOptionWindow,t=e.shouldShowErrorPage,o=e.shouldShowHoopWindow,r=e.shouldShowMinimizedIconButton;return(0,S.jsxs)(S.Fragment,{children:[r&&this.renderIconButtonChat(),n&&this.renderChooseOptionWindow(),o&&this.renderHoopWindow(),t&&this.renderErrorPage()]})}},{key:"fetchConfig",value:function(){var e=(0,o.Z)(l().mark((function e(){var n,t,o,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,x.Z.getChatConfig();case 4:t=e.sent,o=t.isAgentOnline,r=t.isSuccess,t.errors,i=(0,s.Z)(t,W),n.chatConfigs=i,o?n.shouldShowChooseOptionWindow=!0:n.shouldShowHoopWindow=!0,r||(n.shouldShowErrorPage=!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.shouldShowErrorPage=!0;case 14:return e.prev=14,this.setState(n),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"applyDesignToken",value:function(){var e=(0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.props.brand,e.next=4,Z.Z.import(n);case 4:this.setState({isDesignTokenApplied:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.debug(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"setContainerElementStyle",value:function(){var e=this.props.containerElement;e&&(this.setState({originContainerElementPosition:e.style.position}),e.style.position="relative")}},{key:"restoreContainerElementStyle",value:function(){var e=this.props.containerElement,n=this.state.originContainerElementPosition;e&&n&&(e.style.position=n)}}]),t}(f.PureComponent);n.default=P},5989:function(e,n,t){var o=t(5861),r=t(7757),s=t.n(r),i=t(9868),a="/v1/api/gbr/config",c="/v1/api/gbr/leaveagentmessage";n.Z={getChatConfig:function(){return(0,o.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get(a);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))()},leaveMessage:function(e){return(0,o.Z)(s().mark((function n(){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.Z.post(c,e);case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}),n)})))()}}}}]);
//# sourceMappingURL=527.f9f9c868.chunk.js.map